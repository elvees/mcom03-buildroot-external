config BR2_PACKAGE_MCOM03_SBL
	bool "mcom03-sbl"
	depends on BR2_PACKAGE_DDRINIT
	depends on BR2_TARGET_ARM_TRUSTED_FIRMWARE
	depends on BR2_TARGET_UBOOT_INSTALL_DTB
	help
	  Second bootloader for MCom-03.

comment "MCom-03 SBL needs ddrinit, TF-A and U-Boot to be built"
	depends on !BR2_PACKAGE_DDRINIT || !BR2_TARGET_ARM_TRUSTED_FIRMWARE || \
	!BR2_TARGET_UBOOT_INSTALL_DTB

if BR2_PACKAGE_MCOM03_SBL

config BR2_PACKAGE_MCOM03_SBL_REPO_VERSION
	string "Repository version"
	default master
	help
	  Revision to use in the typical format used by Git
	  E.G. a sha id, a tag, ..

config BR2_PACKAGE_MCOM03_SBL_RECOVERY_ENABLE
	bool "Enable recovery support"
	help
	  Allow to load recovery image

config BR2_PACKAGE_MCOM03_SBL_SBIMG_MAKE_RECOVERY
	bool "Make recovery SBIMG"
	help
	  Only make recovery SBIMG.

choice
	prompt "Select the type of security of SBIMG"

config BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_ENC
	bool "enc+sign"
	help
	  Make SBIMG with signed and encrypted binary
	  components.

config BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_SIGN
	bool "sign"
	help
	  Make SBIMG with signed binary components.

config BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_NONE
	bool "none"
	help
	  Make SBIMG with binary components only.

endchoice

config BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE
	string
	default "enc"  if BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_ENC
	default "sign" if BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_SIGN
	default "none" if BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_NONE

if BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_SIGN || BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_ENC

config BR2_PACKAGE_MCOM03_SBL_SBIMG_CERTS_TAR
	string "PATH to the archive with SBIMG certificates"
	default "$(BR2_EXTERNAL_MCOM03_PATH)/board/elvees/sbl-sbimg-certs.tar.gz"
	help
	  PATH to TAR archive with certificates that are required
	  for making signed and encrypted SBIMG.

config BR2_PACKAGE_MCOM03_SBL_FIT_CERTS_TAR
	string "PATH to the archive with FIT keys and certificates"
	default "$(BR2_EXTERNAL_MCOM03_PATH)/board/elvees/uboot-fit-certs.tar.gz"
	help
	  PATH to TAR archive with certificates that are required
	  for making signed FIT.

config BR2_PACKAGE_MCOM03_SBL_FIT_KEY_NAME
	string "The key name"
	default "root"
	help
	  This defines a private key file <key_name>.key for use
	  with signing, and a certificate <key_name>.crt (containing
	  the public key) for use with verification. The name is the
	  value of ‘key-name-hint’ property of the signature node in
	  FIT configuration and when embedded it into U-Boot device
	  tree.

config BR2_PACKAGE_MCOM03_SBL_FIT_SIGN_ALGO
	string "Signing algorithm name"
	default "sha256,rsa3072"
	help
	  Supported algorithm and their value sizes see at:
	  https://docs.u-boot.org/en/latest/usage/fit/source_file_format.html#fit-algorithm

endif

if BR2_PACKAGE_MCOM03_SBL_SBIMG_SEC_TYPE_ENC

config BR2_PACKAGE_MCOM03_SBL_SBIMG_ENC_DSN
	string "DSN"
	help
	  Device Serial Number (32 бита) <0x...>

config BR2_PACKAGE_MCOM03_SBL_SBIMG_ENC_DUK
	string "DUK"
	help
	  Device Unique Key (128 бит) <0x...>

config BR2_PACKAGE_MCOM03_SBL_SBIMG_ENC_KEY
	string "Encryption Key"
	help
	  Encryption Key (128 бит) <0x...>

endif

config BR2_PACKAGE_MCOM03_SBL_ADDITIONAL_VARIABLES
	string "Additional sbl build variables"
	help
	  Additional parameters for the sbl build
	  E.G. '-DWDT_ENABLE=y -DDEBUG=y'

endif
