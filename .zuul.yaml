---
- project:
    check:
      jobs:
        - mcom03-buildroot-build
        - mcom03-ngfwcb-buildroot-build:
            files:
              - configs/mcom03_defconfig
              - fragments/ngfwcb.fragment
        - mcom03-priv-buildroot-build:
            files:
              - .*-felix.*
              - .*-rogue-.*
              - .*-vpu-.*
              - configs/mcom03_defconfig
              - fragments/mcom03bub.fragment
              - fragments/private.fragment
        - mcom03-rockpi-buildroot-build:
            files:
              - configs/mcom03_defconfig
              - fragments/rockpi.fragment
        - mcom03-trustphone-buildroot-build:
            files:
              - configs/mcom03_defconfig
              - fragments/trustphone.fragment
        - pre-commit

    # Run all jobs regardless which files were modified.
    # mcom03-buildroot-build and pre-commit are always triggered in check
    # pipeline.
    experimental:
      jobs:
        - ecam03-buildroot-build
        - mcom03-priv-buildroot-build
        - mcom03-ngfwcb-buildroot-build
        - mcom03-rockpi-buildroot-build
        - mcom03-trustphone-buildroot-build
        - mcom03-buildroot-build-centos8stream
        - mcom03-buildroot-build-ubuntufocal
